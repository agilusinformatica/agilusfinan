@model IEnumerable<AgilusFinan.Domain.Entities.Transferencia>

@{
    ViewBag.Title = "Transferência";
}

<h2>Transferência</h2>

<p>
    @Html.ActionLink("Adicionar", "Create")
</p>

@Html.Partial("_PainelPeriodo")

<script>
    var consultaTransferencias = function () {
        var dataInicial = $('#dataInicial').val();
        var dataFinal = $('#dataFinal').val();

        var dI = dataInicial.substring(8, 10) + '/' + dataInicial.substring(5, 7) + '/' + dataInicial.substring(0, 4);
        var dF = dataFinal.substring(8, 10) + '/' + dataFinal.substring(5, 7) + '/' + dataFinal.substring(0, 4);

        $.ajax({
            url: "@Url.Action("IndexData")",
            method: "GET",
            data: {
                dataInicial: dI,
                dataFinal: dF
            },
            beforeSend: function () {
                $("#listagem").html('<img src="/Content/Images/loading.gif">');
            },
            success: function (conteudo) {
                $("#listagem>img").remove();
                $("#listagem").html(conteudo);
            },
            error: function (e) {
                $("#listagem>img").remove();
                $("#listagem").html(e.message);
            }
        });

    };

    consultarPeriodo(consultaTransferencias);
</script>

<div id="listagem">

</div>
